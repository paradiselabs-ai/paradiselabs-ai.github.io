import{j as e}from"./react-core.CF-4sVlY.js";import{r as u,U as q,c as H,M as Q,S as Z,D as J,P as K,R as O,d as V,e as ee,T as te}from"./react-full.hLWEX48c.js";const D=()=>{const[o,m]=u.useState(()=>{const c=localStorage.getItem("theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});return u.useEffect(()=>{document.documentElement.setAttribute("data-theme",o),localStorage.setItem("theme",o)},[o]),u.useEffect(()=>{const c=window.matchMedia("(prefers-color-scheme: dark)"),l=v=>{m(v.matches?"dark":"light")};return c.addEventListener("change",l),()=>c.removeEventListener("change",l)},[]),{theme:o,setTheme:m}},se=()=>{const{theme:o,setTheme:m}=D(),c=()=>{m(o==="light"?"dark":"light")};return e.jsx("div",{className:"workflow-app",children:e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"header__left",children:[e.jsx("span",{className:"header__logo-text",children:"WorkflowAI"}),e.jsxs("div",{className:"header__actions",style:{marginLeft:"150px"},children:[e.jsx("button",{className:"header__button",title:"Undo","aria-label":"Undo",children:e.jsx(q,{})}),e.jsx("button",{className:"header__button",title:"Redo","aria-label":"Redo",children:e.jsx(H,{})})]})]}),e.jsxs("div",{className:"header__actions",children:[e.jsx("button",{className:"header__button",onClick:c,title:`Switch to ${o==="light"?"dark":"light"} theme`,"aria-label":`Switch to ${o==="light"?"dark":"light"} theme`,children:o==="light"?e.jsx(Q,{}):e.jsx(Z,{})}),e.jsx("button",{className:"header__button",title:"Export your code","aria-label":"Export your code",children:e.jsx(J,{})}),e.jsxs("button",{className:"header__button header__button--run",title:"Preview component","aria-label":"Run preview",children:[e.jsx(K,{}),e.jsx("span",{children:"Run"})]})]})]})})},x=16,ne=()=>{const o=u.useRef(null),m=u.useRef(null),c=u.useRef([]),l=u.useRef(0),v=u.useRef([]),d=u.useRef([]),f=u.useRef(null);return u.useEffect(()=>{if(!o.current)return;const s=o.current,w=s.getContext("2d");if(!w)return;const U=t=>{const n=w.createLinearGradient(0,0,t,0);n.addColorStop(0,"#0092ff"),n.addColorStop(.5,"#00ffae"),n.addColorStop(1,"#e5fe48");const a=w.createLinearGradient(0,0,t,0);return a.addColorStop(0,"#204868"),a.addColorStop(.5,"#256456"),a.addColorStop(1,"#5a643d"),{active:n,inactive:a}},N=(t,n,a)=>{if(t.length){n.beginPath();for(let h=0;h<t.length;h++){const r=t[h];n.moveTo(r.x+r.r,r.y+1.5),n.arc(r.x,r.y+1.5,r.r,0,2*Math.PI)}n.fillStyle=a,n.fill()}},X=t=>{var n;const a=Math.ceil(s.width/x),h=Math.ceil(s.height/x),r=Array.from({length:a},()=>Array.from({length:h},()=>({circles:[]})));for(let i=0;i<t.length;i++){const p=t[i],g=Math.floor(p.x/x),b=Math.floor(p.y/x);(n=r[g])!=null&&n[b]&&r[g][b].circles.push(p)}c.current=r},Y=()=>{const t=document.createElement("canvas");t.width=s.width,t.height=s.height;const n=t.getContext("2d");!n||!f.current||(N(d.current,n,f.current.inactive),m.current=t)},S=()=>{s.width=window.innerWidth,s.height=window.innerHeight,f.current=U(s.width);const t=15,n=Math.round(s.width/t*1.5),a=Math.round(s.height/t*1.5);d.current=Array.from({length:n*a},(h,r)=>({x:13+t*.8*(r%n),y:10+(t-.25)*.8*Math.floor(r/n),r:.5,animation:!1})),X(d.current),Y()},z=()=>{const t=33.333333333333336,n=3.5,a=c.current,h=v.current;for(let r=0;r<d.current.length;r++)d.current[r].r=.5,d.current[r].animation=!1;for(let r=h.length-1;r>=0;r--){const i=h[r];if(i.lifetime+=1,i.lifetime>t){h.splice(r,1);continue}const p=i.lifetime/t,g=n*(1-p),b=h[r-1]||i,F=(b.x+i.x)/2,$=(b.y+i.y)/2,E=(M,A)=>{var I;const L=Math.floor(M/x),P=Math.floor(A/x);for(let j=L-1;j<=L+1;j++)for(let R=P-1;R<=P+1;R++)if((I=a[j])!=null&&I[R]){const W=a[j][R];for(let C=0;C<W.circles.length;C++){const k=W.circles[C],T=k.x-M,G=k.y-A;T*T+G*G<64&&g>k.r&&(k.r=g,k.animation=g>=.8)}}};E(i.x,i.y),E(F,$)}},y=()=>{if(!w||!m.current||!f.current)return;w.clearRect(0,0,s.width,s.height),w.drawImage(m.current,0,0);const t=d.current.filter(n=>n.animation);N(t,w,f.current.active),z(),requestAnimationFrame(y)},_=t=>{if(l.current%2===0){const n=s.getBoundingClientRect();v.current.push({x:t.clientX-n.left,y:t.clientY-n.top,lifetime:0})}l.current=(l.current+1)%2};S(),s.addEventListener("pointermove",_),s.addEventListener("pointerdown",_);const B=requestAnimationFrame(y);return()=>{s.removeEventListener("pointermove",_),s.removeEventListener("pointerdown",_),cancelAnimationFrame(B),window.removeEventListener("resize",S)}},[]),e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("canvas",{ref:o,className:"absolute top-0 left-0 w-full h-full pointer-events-auto"})})},ae=()=>{const{theme:o}=D();return e.jsx("div",{className:"workflow-app",children:e.jsxs("div",{className:"absolute inset-0","data-theme":o,children:[e.jsx(ne,{}),e.jsx("div",{className:"relative z-10 h-full",children:e.jsx("div",{className:"p-6"})})]})})},ce=()=>{const[o,m]=O.useState("add"),c=[{id:"add",icon:V,label:"Add",onClick:()=>console.log("Add clicked")},{id:"askAi",icon:ee,label:"Ask AI",onClick:()=>console.log("Ask AI clicked")},{id:"clear",icon:te,label:"Clear",onClick:()=>console.log("Clear clicked")}];return e.jsx("div",{className:"workflow-app",children:e.jsx("nav",{className:"workflow-editor","aria-label":"Workflow tools",children:e.jsx("div",{className:"workflow-editor__buttons",role:"toolbar","aria-label":"Workflow editing tools",children:c.map(({id:l,icon:v,label:d,onClick:f})=>e.jsx("button",{onClick:()=>{m(l),f?.()},className:`workflow-editor__button group ${o===l?"workflow-editor__button--selected":""}`,"aria-label":d,title:d,"aria-pressed":o===l,children:e.jsxs("span",{className:"workflow-editor__button-content",children:[e.jsx(v,{className:"workflow-editor__button-icon"}),e.jsx("span",{className:"workflow-editor__button-text",children:d})]})},l))})})})};export{se as W,ce as a,ae as b,D as u};
