import{r}from"./react-full.hLWEX48c.js";import{j as d}from"./react-core.CF-4sVlY.js";const E={user:{isLoggedIn:!1,isRegistered:localStorage.getItem("glue_registered")==="true",preferences:{theme:localStorage.getItem("theme")||"system",notifications:localStorage.getItem("notifications")==="true"}},ui:{isLoading:!1,activeSection:null,sidebarOpen:!1,alerts:[]},waitlist:{submissionInProgress:!1,submissionSuccess:!1,submissionError:null}},I=(e,s)=>{switch(s.type){case"SET_USER_LOGGED_IN":return{...e,user:{...e.user,isLoggedIn:s.payload}};case"SET_USER_REGISTERED":return localStorage.setItem("glue_registered",s.payload.toString()),{...e,user:{...e.user,isRegistered:s.payload}};case"SET_THEME":return localStorage.setItem("theme",s.payload),{...e,user:{...e.user,preferences:{...e.user.preferences,theme:s.payload}}};case"SET_NOTIFICATIONS":return localStorage.setItem("notifications",s.payload.toString()),{...e,user:{...e.user,preferences:{...e.user.preferences,notifications:s.payload}}};case"SET_LOADING":return{...e,ui:{...e.ui,isLoading:s.payload}};case"SET_ACTIVE_SECTION":return{...e,ui:{...e.ui,activeSection:s.payload}};case"TOGGLE_SIDEBAR":return{...e,ui:{...e.ui,sidebarOpen:!e.ui.sidebarOpen}};case"ADD_ALERT":const t={id:Date.now().toString(),...s.payload};return{...e,ui:{...e.ui,alerts:[...e.ui.alerts,t]}};case"REMOVE_ALERT":return{...e,ui:{...e.ui,alerts:e.ui.alerts.filter(a=>a.id!==s.payload)}};case"SET_WAITLIST_SUBMISSION_IN_PROGRESS":return{...e,waitlist:{...e.waitlist,submissionInProgress:s.payload}};case"SET_WAITLIST_SUBMISSION_SUCCESS":return{...e,waitlist:{...e.waitlist,submissionSuccess:s.payload,submissionError:s.payload?null:e.waitlist.submissionError}};case"SET_WAITLIST_SUBMISSION_ERROR":return{...e,waitlist:{...e.waitlist,submissionError:s.payload,submissionSuccess:s.payload?!1:e.waitlist.submissionSuccess}};default:return e}},c=r.createContext(void 0),g=({children:e,initialState:s})=>{const[t,a]=r.useReducer(I,s||E);return d.jsx(c.Provider,{value:{state:t,dispatch:a},children:e})},u=()=>{const e=r.useContext(c);if(e===void 0)throw new Error("useAppState must be used within an AppProvider");return e},y=()=>{const{state:e,dispatch:s}=u(),t=r.useCallback(n=>{s({type:"SET_LOADING",payload:n})},[s]),a=r.useCallback(n=>{s({type:"SET_ACTIVE_SECTION",payload:n})},[s]),o=r.useCallback(()=>{s({type:"TOGGLE_SIDEBAR"})},[s]),l=r.useCallback((n,p)=>{s({type:"ADD_ALERT",payload:{type:n,message:p}});const S=Date.now().toString();return setTimeout(()=>{s({type:"REMOVE_ALERT",payload:S})},5e3),S},[s]),i=r.useCallback(n=>{s({type:"REMOVE_ALERT",payload:n})},[s]);return{isLoading:e.ui.isLoading,activeSection:e.ui.activeSection,sidebarOpen:e.ui.sidebarOpen,alerts:e.ui.alerts,setLoading:t,setActiveSection:a,toggleSidebar:o,addAlert:l,removeAlert:i}},m=()=>{const{state:e,dispatch:s}=u(),t=r.useCallback(i=>{s({type:"SET_USER_LOGGED_IN",payload:i})},[s]),a=r.useCallback(i=>{s({type:"SET_USER_REGISTERED",payload:i})},[s]),o=r.useCallback(i=>{s({type:"SET_THEME",payload:i})},[s]),l=r.useCallback(i=>{s({type:"SET_NOTIFICATIONS",payload:i})},[s]);return{isLoggedIn:e.user.isLoggedIn,isRegistered:e.user.isRegistered,theme:e.user.preferences.theme,notifications:e.user.preferences.notifications,setLoggedIn:t,setRegistered:a,setTheme:o,setNotifications:l}},b=()=>{const{state:e,dispatch:s}=u(),t=r.useCallback(i=>{s({type:"SET_WAITLIST_SUBMISSION_IN_PROGRESS",payload:i})},[s]),a=r.useCallback(i=>{s({type:"SET_WAITLIST_SUBMISSION_SUCCESS",payload:i})},[s]),o=r.useCallback(i=>{s({type:"SET_WAITLIST_SUBMISSION_ERROR",payload:i})},[s]),l=r.useCallback(()=>{t(!1),a(!1),o(null)},[t,a,o]);return{submissionInProgress:e.waitlist.submissionInProgress,submissionSuccess:e.waitlist.submissionSuccess,submissionError:e.waitlist.submissionError,setSubmissionInProgress:t,setSubmissionSuccess:a,setSubmissionError:o,resetWaitlistState:l}};export{g as A,m as a,b,y as u};
